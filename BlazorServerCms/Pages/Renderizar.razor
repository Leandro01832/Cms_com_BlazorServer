@page "/renderizar"
@page "/morecontent/{contentid:long?}"
@page "/renderizar/{storyid:int}/{Indice:int}/{Compartilhou}/{Filtro:long?}"
@page "/renderizar/{nomeLivro}/{storyid:int}/{Indice:int}/{Compartilhou}/{Filtro:long?}"
@page "/renderizar/{nomeLivro}/{storyid:int}/{Indice:int}/{Compartilhou}/{rotas}"
@page "/renderizar/{storyid:int}/{Indice:int}/{Compartilhou}/{rotas}"
@using NVelocity.Runtime.Directive
@inherits RenderizarBase
@layout MeuLayout


@if (Mensagem != null || Model == null)
{
    if (Model == null)
    {
        <PageTitle>Carregando...</PageTitle>
        <div class="centralizar">
            <h1> Carregando história... </h1>
            <img src="/Loading.gif" />
        </div>
    }
    else 
    if (Mensagem.Contains("digite um numero menor"))
    {
        <PageTitle>@Mensagem</PageTitle>
        
        
            <h1>Pagina não encontrada</h1>
        
        <h1>@Mensagem</h1>
        <br />
        <a href="#" onclick="@Casinha" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z" />
            </svg>

        </a>

    }
}
else if (!repositoryPagina.erro)
{
    if(Model is Pagina)
    {
        <PageTitle>Verso @Versiculo</PageTitle>
    }
    else
    {
        <PageTitle>+ Conteudo</PageTitle>

    }

    <div class="container" >

      

        <div class="menu row">

            <div  class="pesquisas col-md-6" >

                    <div class="heade col-md-12">
                       
                            @if (Filtro == null)
                            {
                                <PageTitle>@nameStory</PageTitle> 
                                <span>
                                
                                    <header>Story: @nameStory</header>
                                
                                    <a data-first onclick="@(() => acessarCapitulos() )" class="btn">
                                        Capítulo @cap 
                                    </a>
                                </span>
                            } 
                            else
                            {

                                if (rotas != null)
                                {
                                    <PageTitle>@rotas</PageTitle>
                                    
                                        <p> <header>@rotas</header></p>
                                    
                                }
                                else
                                {
                                    <PageTitle>@nameGroup</PageTitle>
                                    
                                        <p >
                                            <header>
                                                @if(InfoSemCriterio)
                                                {
                                                  <a onclick="@ativarModal">@nameGroup</a>  
                                                }
                                                else
                                                {
                                                    @nameGroup

                                                }

                                            @if (tellStory)
                                            {
                                                <b> - Capitulo @cap</b>
                                            } 

                                             </header>
                                        </p>
                                    

                                }
                                

                                @if (Model is Pagina || Model is UserContent && mudanca)
                                {
                                    if (!tellStory && Model2.Criterio != null)
                                    {
                                        <div>
                                            <span>
                                                - Capítulo @cap 
                                            <span class="versos">
                                                <a onclick="@(() => acessarVerso())" class="btn">
                                                    Versículo @Versiculo
                                                </a>
                                            </span>
                                            </span>
                                        </div>
                                    }
                                    else if (!tellStory)
                                    {
                                        <div>
                                            <span>
                                                - Capítulo @cap 
                                            <span class="versos">
                                                <a onclick="@(() => acessarComCriterio())" class="btn">
                                                    Com Critério
                                                </a>
                                            </span>
                                            </span>
                                        </div>
                                    }
                                  

                                }

                            }

                        
                        

                    </div>                     

                        @if (cap == 0)
                        {
                            <span class="ms-3">Cap.</span>
                        }                     

            </div>

            <div class="actions col-md-6"> 
                       
              
                @{
                    if (outroHorizonte == 0 && Filtro == null)
                    {
                        <span class="ms-3">Vers.</span>
                    }
                    else if (outroHorizonte == 1)
                    {
                        <span class="ms-3">Pasta</span> 
                    }

                    @if(tellStory && Model2.Criterio != null)
                        {
                            <div class="capSubstory">
                                <span>
                                    <a onclick="@(() => desabilitarTellStory())" class="btn versos">
                                        Versiculo @Versiculo
                                    </a>
                                </span>
                            </div> 
                        }
                        else if(tellStory)
                        {
                            <div class="capSubstory">
                                <span>
                                    <a onclick="@(() => acessarComCriterio())" class="btn versos">
                                        Com Critério
                                    </a>
                                </span>
                            </div>
                        }

                         <div class="@inputs"> 
                         
                         

                            @if (!Content)
                            {
                                if (tellStory)
                                {
                                    <input data-2 type="number" class="tellStory" placeholder="@placeholder" @onkeypress="@((KeyboardEventArgs e)=> TeclaPressionada(e))" @ref="firstInput"
                                    id="NumeroPaginaAcesso3" min="1" max="@quantidadeLista" value="@Indice" onchange="@((ChangeEventArgs e) => opcional = e.Value!.ToString()!)" />
                                    <div>
                                        <a id="acessoPaginaComInput2" onclick="@Pesquisar"
                                        class="btn btn-primary ms-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                                            </svg>
                                        </a>
                                    </div>

                                }
                                else
                                {
                                    <input data-2 type="number" placeholder="@placeholder" @onkeypress="@((KeyboardEventArgs e)=> TeclaPressionada(e))" @ref="firstInput"
                                    id="NumeroPaginaAcesso3" min="1" max="@quantidadeLista"  onchange="@((ChangeEventArgs e) => opcional = e.Value!.ToString()!)" />
                                    <div class="centralizar">
                                        <a id="acessoPaginaComInput2" onclick="@Pesquisar"
                                        class="btn btn-primary ms-1">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                                            </svg>
                                        </a>
                                    </div>
                                }
                            }
                            else
                            {
                                <input type="text" placeholder="usuario" @onkeypress="@((KeyboardEventArgs e)=> TeclaPressionada(e))" @ref="firstInput"
                                id="NumeroPaginaAcesso2" onchange="@((ChangeEventArgs e) => alterarQuery(e))" />
                                <div class="centralizar">
                                    <a id="acessoPaginaComInput2" onclick="@Pesquisar"
                                    class="btn btn-primary ms-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                                        </svg>
                                    </a>
                                </div>
                            }

                        </div>
   

<div class="dropdown" id="myDropdown" > 
    <button class="dropbtn" >Actions</button>
    <div class="dropdown-content">

                <a onclick="@Casinha"  data-3>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                       <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z" />
                    </svg>
                    Home
                </a>

                @if (nameStory != "Padrao" && outroHorizonte == 0 && Model != null 
                && Model!.Comentario != null)
                {
                    <a data-4 href=""  onclick="@(() => acessarComentarios())">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16">
                            <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                            <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z" />
                        </svg> @Model.Comentario.Count
                    </a>
                }

                @if (cap != 0 && outroHorizonte == 0 && user.Identity!.IsAuthenticated)
                {
                    @if (!liked) 
                    {                           
                        <a href="#" onclick="@DarUmLike"> 
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                                <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z" />
                            </svg>
                         @Model!.QuantLiked 
                        </a>
                    }
                    else 
                    {                            
                        <a href="#" onclick="@Unlike" class="btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                                <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z" />
                            </svg>
                        @Model!.QuantLiked                          
                        </a>
                    }
                                       
                }
                                      
                @if (Filtro != null && rotas == null)
                {
                    <a class="compartilhar" onclick="@share">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
                            <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3" />
                        </svg> @Model.QuantShared
                    </a>
                }

                @if (preferencia != null)
                {
                    <a href="#" onclick="@removerPreferencia">
                        @preferencia X
                    </a>
                }

                <button  type="button" @onclick="StartTour">Start Tour</button>

                <a data-5 href="#" class="btn" onclick="@(() => acessarPastas())">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder" viewBox="0 0 16 16">
                        <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z" />
                    </svg> Pastas
                </a>
    </div>
  </div> 

            @if (outroHorizonte == 0 && nameStory != "Padrao" && Model != null && Model!.Filtro! != null && Model!.Filtro!.Count != 0)
                {
                    @if (Model2 != null && Model2.usuarios.Count == 0 && !ultimaPasta || Filtro == null && !ultimaPasta)
                    {
                        <a data-6 id="ultimapasta" onclick="@(() => redirecionarMarcar())"  >
                            marcar?
                        </a>
                    }
                } 
           <a onclick="@acessarChave" class="chave btn btn-primary"> 

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2M2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                </svg>
                @chave
           </a>

                 if(Filtro != null)
                {
                    <div class="Camadas">
                    camada @Model2!.Camada.Numero
                    </div>
                }

            }
            
            
            </div> 
             

        </div>

        @if (usuarios!.Count > 0)
        {

            <div class="users">

                @foreach (var item in usuarios!)
                {
                    <a onclick="@(() => acessarPreferenciasUsuario(item.user))">
                        Usuario compartilhante @item.user -
                        <div class="circulop2">
                            <div class="circulo2p2">
                                @if (item.UserModel.Image != null)
                                {
                                    <img src="ImgUser/usuario-@(item.user)-@(item.UserModel.Image)" class="ImgUser">

                                }
                                else
                                {
                                    <img src="ImgUser/padrao.jpg" class="ImgUser">
                                }
                            </div>
                        </div>
                    </a>
                }
            </div>
        }

        <div class="botoes">
            <a class="prev btn btn-primary"  onclick="@buscarAnterior">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-chevron-double-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                    <path fill-rule="evenodd" d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                </svg>
            </a>


            <a class="prox btn btn-primary" onclick="@buscarProximo">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-chevron-double-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708z" />
                    <path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708z" />
                </svg>
            </a>


            <div class="render">
                
                <div class="cabecalho">

                    @if (rotas != null)
                    {
                        <p>Versiculos encontrados</p>
                    }

                    @if (Content)
                    {
                        if(Model is UserContent)
                        {
                            var user = (UserContent)Model;
                            <p>
                                <h5> <a href="/@user.UserModel.UserName">  @user.UserModel.UserName</a>  </h5>
                            </p>

                        }
                    }

                        @if (Filtro != null)
                        {
                            <p>
                                @* @if (Model != null && Content == false)
                                {
                                    @Model.Data.ToString("dd/MM/yyyy")
                                } *@
                                <input type="checkbox" id="data" name="data" @bind="Content" onclick="@ativarConteudo" />
                                <a href="/conteudo">Mais Conteudo?</a>
                            </p>
                        }
                    </div>

                @if (outroHorizonte == 0)
                {
                    if (Model != null && Model is ProductContent && Model.Produto.Count > 0)
                    {
                        @foreach (var item in Model.Produto)
                        {

                            <div class="row container produto">
                                <div class="col-md-6 info">
                                    <p> Categoria: @item.Produto.Nome </p>
                                    <p> Descrição: @item.Produto.Descricao </p>
                                    <p> Preço: @item.Produto.Preco </p>
                                    <p> Estoque: @item.Produto.QuantEstoque </p>
                                    <div class="col-md-12 imagens">
                                        @{
                                            @foreach (var item2 in item.Produto.Imagem!.ToList())
                                            {
                                                if (item.Produto.Imagem!.ToList().IndexOf(item2) != 0)
                                                {
                                                    <img src="@item2.ArquivoImagem" class="ImagemProduto" />
                                                }
                                            }
                                        }
                                    </div>
                                </div>
                                <div class="col-md-6 imagem">
                                    <img src="" class="ImagemProduto" />
                                </div>

                            </div>
                        }

                    }
                    else if (Model != null)
                    {                                   
                            if(id_video == null && Model != null 
                            && !Model.Html!.Contains("iframe"))
                            {
                                @markup 
                            }
                            
                    }

                    if (Model != null && Model.Produto != null && Model.Produto.Count > 0)
                    {
                        @*Mostrar links em um modal*@
                        <a href="#" onclick="@AdicionarAoCarrinho">
                            Vá comprar
                        </a>
                    }

                    <!-- ProdutoContent -->
                    if (cap == 2 && Model is Comment)
                    {
                        Comment pa = (Comment)Model;
                        if (pa.ContentId != null)
                        {
                            <p>Comentário do Capitulo @CapituloComentario Verso @VersoComentario </p>
                        }
                        else
                        {
                            <p>Apenas um comentário </p>

                        }
                    }
                }
                else if (outroHorizonte == 1 && Model2 != null)
                {
                    var cam = Model2.Camada.Numero;
                    <div class="centralizar">
                        <a onclick="@acessarPasta">
                            <h3> Pasta @Model2!.Nome </h3>
                        </a>

                        <p>
                            Camada nº @cam
                        </p>
                        @{

                            var p = buscarPastaFiltrada(cam);

                            if (@cam != 1 && p != null)
                            {
                                <p>
                                    é um filtro da
                                    <a onclick="@(() => marcarPasta((int)p))">
                                        pasta  @p
                                    </a>
                                </p>
                            }
                            else if (p == null)
                            {
                                <p>Esta pasta não possui nenhum versículo</p>
                            }

                        }

                    </div>
                }





            </div>
        
        </div>

      
        <div class="Paginacao">

            <div class="Informativo">
                <h3>

                    <input data-7 type="checkbox" @bind="automatico" id="automatico" name="automatico" onclick="@ativar" />


                    Automático
                </h3>

                <div id="horizontes">


                    @{
                        if (cap != 0)
                        {
                            @if (Filtro == null && outroHorizonte == 1 && condicaoFiltro)
                            {
                                <div data-10 style="background-color:gray;" class="item-horizonte">


                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder btn btn-dark" viewBox="0 0 16 16">
                                        <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z" />
                                    </svg>

                                </div>
                            }
                            else if (Filtro == null)
                            {
                                <div data-10 style="background-color:transparent;" class="item-horizonte">

                                    <a onclick="@( () =>{ acessarHorizontePastas(null);} )">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder btn btn-dark" viewBox="0 0 16 16">
                                            <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z" />
                                        </svg>
                                    </a>
                                </div>
                            }

                            @if (Filtro == null && outroHorizonte == 0 && condicaoFiltro)
                            {

                                <div data-11 style="background-color:gray;" class="item-horizonte">

                                    <div class="barra">
                                        ---
                                    </div>

                                </div>
                            }

                            else if (Filtro == null)
                            {
                                <div data-11 style="background-color:transparent;" class="item-horizonte">

                                    <a data-8 onclick="@acessarHorizonteVersos">
                                        <div class="barra">
                                            ---
                                        </div>
                                    </a>
                                </div>
                            }


                        }



                        if (cap == 0)
                        {
                            <span class="TextoInformativo">Capitulo @Indice de @quantidadeLista</span>
                        }
                        else if (!tellStory)
                        {

                            if (outroHorizonte == 1 && cap != 0)
                            {
                                <span class="TextoInformativo">Pasta @Indice de @quantidadeLista</span>

                            }
                            else if (Filtro == null)
                            {
                                <span class="TextoInformativo">Versiculo @Indice de @quantidadeLista</span>
                            }

                        }
                        if (outroHorizonte == 1)
                        {
                            <a href="#" class="btn btn-dark" onclick="@listarPastas">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z" />
                                    <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z" />
                                </svg>
                            </a>
                        }
                    }

                </div>
                @if (tellStory)
                {
                    if (!Content)
                    {
                        <span class="TextoInformativo">Item @Indice de @quantidadeLista</span>
                    }

                }


                @{

                    if (Filtro != null)
                    {
                        <a data-2  class="btn btn-dark" onclick="@listarPasta">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z" />
                                <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z" />
                            </svg>

                        </a>

                        <span>-----</span>
                    }

                    if (Model2 != null && Filtro != null)
                    {
                        <a class="btn btn-dark" onclick="@(() => {acessarHorizontePastas(indice_Filtro);} )">
                            @indice_Filtro
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder-fill" viewBox="0 0 16 16">
                                <path d="M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z" />
                            </svg>
                        </a>

                    }

                }
            </div>

            <div class="@divPagina" style="background-color:white;">
                @{
                    var padrao = " vermelho";


                    <div id="carouselIndicators" bs-pause="false">

                        <div class="carousel-inner">



                            @if (array != null && listaContent.Count > 0)
                            {
                                for (var i = 0; i < array.Length; i++)
                                {
                                    if ( array[i] != null)
                                    {
                                        <div class="carousel-item ativo">
                                            @for (var ind = 0; ind < array[i].Count; ind++)
                                            {
                                                if (Filtro == null)
                                                {
                                                    <div class="DivPag@(classCss)">
                                                        @if (Indice == retornarVerso(array[i][ind]))
                                                        {

                                                            <div>
                                                                <span class="indice"><b>@retornarVerso(array[i][ind])</b> </span>
                                                            </div>

                                                            <div class="barra">
                                                                -
                                                            </div>


                                                        }
                                                        else
                                                        {

                                                            <div>
                                                                <span class="indices"><b>@retornarVerso(array[i][ind])</b> </span>
                                                            </div>

                                                            <div class="barra">
                                                                -
                                                            </div>

                                                        }
                                                    </div>

                                                }
                                                else if (Filtro != null)
                                                {
                                                        var condicao = (slideAtual * quantDiv) + (ind + 1) == Indice;
                                                    if (!tellStory)
                                                    {
                                                       // var condicao = vers == retornarVerso(array[i][ind]);
                                                        <div class="@(DivPag) @(classCss)" >
                                                            <div>
                                                                @if (Model != null && condicao)
                                                                {
                                                                    if (!Content)
                                                                    {
                                                                        if(Model2.Criterio != null)
                                                                        {
                                                                            <span data-first class="indice"> @Versiculo</span>
                                                                        }
                                                                        else
                                                                        {
                                                                            <span data-first class="indice"> X</span>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="indice">0</span>

                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    <span class="indices"> - </span>

                                                                }

                                                            </div>
                                                            <div class="barra">
                                                                -
                                                            </div>
                                                        </div>
                                                    }
                                                    else
                                                    {
                                                       // var condicao = vers == retornarVerso(array[i][ind]);

                                                            <div class="@(DivPag) @(classCss)" >
                                                                <div>
                                                                    @if (Model != null && condicao)
                                                                    {
                                                                        if (!Content)
                                                                        {
                                                                            if(Model2.Criterio != null)
                                                                            {
                                                                                <span data-first class="indice"> @Versiculo</span>
                                                                            }
                                                                            else
                                                                            {
                                                                                <span data-first class="indice"> X</span>
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            <span class="indice">0</span>
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        <span class="indices"> - </span>

                                                                    }
                                                                    <div class="barra">
                                                                        <span class="divisao"> @((slideAtual * quantDiv) + (ind + 1))</span>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                    }
                                                }

                                            }
                                        </div>

                                    
                                            <div class="carousel-item ">
                                            
                                            </div>
                                    }
                                                                    
                                    
                                }
                            }                          

                        </div>
                    </div>
                }
            </div>

            <div class="progressbar" id="progressbarContainer" onclick="@((MouseEventArgs e) =>  { OnClick(e);})"   >
                <div> 
                <div class="marker" title="Aqui é Camada 2" style="left:80%; background-color:black;" >
                </div>
                @if(Model is VideoFilter) 
                {
                    foreach(var item in porcentagens)
                    {
                        <div class="marker" title="Aqui é Camada @(porcentagens.IndexOf(item) + 2)"
                         style="left:@(item)%; background-color:black;" >
                        </div>

                    }

                }
                </div>
            </div>

        </div>

    </div>
}

else
{
    <div class="centralizar">
        <h3>Aconteceu um erro. Entre em contato com a suporte da empresa!!!</h3>
    </div>

}


 <Modal Title="Sem Critério" IsVisible="showModal" Close="() => showModal = false" ShowConfirmButton ="false">

        @if(Model2 != null)
        {
            <h4><strong>Informações de @Model2.Nome</strong></h4>

            @foreach(var item in listaFiltro.OfType<SubFiltro>()
            .Where(f => f.CriterioId == null && f.FiltroId == Model2.Id).ToList())
            {
                if(item.CriterioId == null)
                {
                    <a onclick="@(() => acessarSemCriterio(item.Id))" >  @item.Nome </a>
                    <hr />
                }
            }
            
        }        
       
</Modal>


